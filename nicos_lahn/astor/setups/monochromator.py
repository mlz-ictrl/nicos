description = 'double crystal monochromator setup'

group = 'optional'

excludes = ['ngi']

devices = dict(
    mono=device('nicos_mlz.antares.devices.Monochromator',
                description='ANTARES PG Double Crystal Monochromator',
                dvalue1=3.354,
                dvalue2=3.354,
                distance=97,
                phi1='mr1',
                phi2='mr2',
                translation='mtz',
                inout='mono_inout',
                abslimits=(1.4, 6.5),
                userlimits=(1.4, 6.5),
                maxage=5,
                pollinterval=3,
                parkingpos={
                    'phi1': 12,
                    'phi2': 12,
                    'translation': -50,
                    'inout': 'out'
                },
                ),
    mr1=device('nicos.devices.generic.VirtualMotor',
               description='rotation of first monochromator crystal',
               abslimits=(12, 66),
               unit='deg',
               curvalue=12,
               maxage=5,
               pollinterval=3,
               precision=0.01,
               speed=5,
               visibility=(),
               ),
    mr2=device('nicos.devices.generic.VirtualMotor',
               description='rotation of second monochromator crystal',
               abslimits=(12, 66),
               unit='deg',
               curvalue=12,
               maxage=5,
               pollinterval=3,
               precision=0.01,
               speed=5,
               visibility=(),
               ),
    mtz=device('nicos.devices.generic.VirtualMotor',
               description='translation of second monochromator crystal',
               abslimits=(-120, 260),
               unit='mm',
               userlimits=(-120, 260),
               maxage=5,
               pollinterval=3,
               precision=0.01,
               visibility=(),
               speed=5,
               ),
    mono_io=device('nicos.devices.generic.ManualSwitch',
                   description='moves monochromator in and out of beam',
                   states=[1, 2],
                   unit='',
                   maxage=5,
                   pollinterval=3,
                   visibility=(),
                   ),
    mono_inout=device('nicos.devices.generic.Switcher',
                      description='moves monochromator in and out of beam',
                      moveable='mono_io',
                      mapping={
                          'in': 1,
                          'out': 2,
                      },
                      unit='',
                      maxage=5,
                      pollinterval=3,
                      visibility=(),
                      ),
)
